<div class="card" *ngIf="user">
  <div class="card-block">
    <div class="header-user-name">
      <div class="user-image">
        <kudos-user-icon [fullName]="user.firstName + ' ' + user.lastName" [size]="2"></kudos-user-icon>
      </div>
      <h4>{{user.firstName}} {{user.lastName}}</h4>
    </div>
    <div class="header-body">
      <div class="header-body-item">
        <span class="header-secondary-text">Total Kudos</span>
        <span class="header-num">{{user.totalKudos}}</span>
      </div>
      <div class="header-body-item">
        <span class="header-secondary-text">Weekly Kudos</span>
        <span class="header-num">{{user.weeklyKudos}}</span>
      </div>
    </div>
    <div class="header-footer" *ngIf="showSettings">
      <a href="#settingsModal" data-toggle="modal"><i class="fa fa-cog" aria-hidden="true"></i> Settings</a>
    </div>
  </div>
</div>

<!-- Settings modal -->
<div *ngIf="showSettings"
        class="modal fade"
     id="settingsModal"
     tabindex="-1"
     role="dialog"
     aria-labelledby="settingsModal"
     aria-hidden="true">
  <div class="modal-dialog"
       role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title"
            id="myModalLabel">Settings</h4>
      </div>
      <div class="modal-body">
        <h5>Preferences</h5>
        <div class="form-group custom-checkbox">
          <p>
            <input type="checkbox" id="receiveNotifications" name="receiveNotifications"
                   [(ngModel)]="isSubscribing"
                   (ngModelChange)="isSubscribing = $event">
            Receive emails about new challenges
          </p>
        </div>

        <button class="btn btn-primary" (click)="changeSubscription()">Save</button>

        <hr>

        <h5>Change password</h5>
        <form (submit)="changePassword()">
          <label for="userNewPassword">New password</label>

          <div class="form-group input-group">
            <input type="{{!showPassword ? 'password' : 'text'}}"
                   class="form-control"
                   id="userNewPassword"
                   [(ngModel)]="userNewPassword" (ngModelChange)="userNewPassword = $event"
                   name="userNewPassword">
            <span class="input-group-addon"
                  (click)="showPassword = !showPassword">
                            <i [ngClass]="!showPassword ? 'fa fa-eye' : 'fa fa-eye-slash'" aria-hidden="true"></i></span>
          </div>

          <div *ngIf="showPasswordError" class="alert alert-danger" role="alert">
            {{passwordError}}
          </div>

          <button type="submit" class="btn btn-primary">
            Change password
          </button>
        </form>
      </div>
    </div>
  </div>
</div>
